---
import { Card, CardContent } from "@/components/ui/card";
import { getImageBySrcPath } from '@/lib/utils';
import { Image } from 'astro:assets';

const { src, alt, caption } = Astro.props;
const image = getImageBySrcPath(src);
---

<Card className="overflow-hidden rounded-lg md:mx-10 sm:mt-2 md:mt-4 shadow-2xl ring-1 ring-gray-300/50">
    <CardContent className="px-5 py-0">
        <figure>
            <div class="rounded-t-lg overflow-hidden">
              {image ? (
                <Image
                  src={image}
                  alt={alt}
                  width={1200}
                  format="webp"
                  sizes="(min-width: 768px) 75vw, 100vw"
                  class="w-full h-auto max-h-[90vh] md:max-h-[60vw] lg:max-h-[35vw] object-contain"
                />
              ) : (
                <img
                  src={src}
                  alt={alt}
                  class="w-full h-auto max-h-[90vh] object-contain"
                  loading="lazy"
                  decoding="async"
                />
              )}
            </div>
          
            {caption && (
              <figcaption class="text-center text-3xl text-gray-600 font-handwritten">
                {caption}
              </figcaption>
            )}
          </figure>          
    </CardContent>
  </Card>
